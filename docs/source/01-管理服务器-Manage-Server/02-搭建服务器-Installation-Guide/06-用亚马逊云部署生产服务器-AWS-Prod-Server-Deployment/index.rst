.. _aws-prod-server-deployment:

用亚马逊云部署生产服务器 AWS Prod Server Deployment
==============================================================================


架构选择
------------------------------------------------------------------------------


选择游戏服务器 EC2
------------------------------------------------------------------------------
根据 AC Wiki 上 https://www.azerothcore.org/wiki/memory-usage 的说法, 当游戏玩家探索到一片地图后, 这个区域的地图就会被加载进内存, 而玩家多的时候几乎所有的地图都会被加载进内存, 这些地图至少占用 11G 左右. 而且操作系统本身大约会占用 1G 左右的内存. 而且大约每 100 个玩家需要占用 1G 内存. 你需要留给服务器大约 1 - 2G 内存左右供临时使用. 根据这篇 AC 上的讨论 https://github.com/azerothcore/azerothcore-wotlk/discussions/3891, 维护者 FrancescoBorzi 说了, CPU 一般不是瓶颈, 而 RAM 才是. < 200 个玩家的话, 16GB 内存是足够了的. 这和我们之前计算的 200 玩家 = 11G  + 2G + 1G = 占用 14G 内存一致.

在官服, 一个服务器最大玩家容量在 3000 - 5000 左右, 按照 5000 玩家计算, 我们需要 5000 / 100 ~= 50G 内存, 加上 11G 地图和操作系统的 1G 大约是 62G 内存. 显然我们用 64G 内存的服务器会有随时崩溃的危险, 由于内存在 64 以上一般是 32G 一档, **所以对于 5000 玩家的服务器我们需要用 96G 内存的虚拟机比较合适**

同理我们可以计算出不同玩家数量下所需的内存:

- 




1.

-
- https://aws.amazon.com/ec2/instance-types/

https://github.com/azerothcore/azerothcore-wotlk/blob/master/data/sql/create/create_mysql.sql